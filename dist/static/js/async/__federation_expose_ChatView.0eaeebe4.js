"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["2163"],{57415:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(85893),r=a(57322),s=a(36959),i=a(46010),l=a(23972),o=a(73675),c=a(28739),d=a(19058),u=a(87067),h=a(97571),g=a(59334),m=a(52517),p=a(72679);a(39327);var f=a(46761),x=a(96406),v=a(39702),w=a(56152),y=a(67046),j=a(70621);let S=e=>{var t;let{chatSessionsFetching:a}=e,S=(0,y.useChatStore)(),b=(0,r.useRef)(null),C=(0,r.useRef)(null),Z=()=>{if(!b.current)return;let e=b.current;return e.children[e.children.length-1]},A=()=>{var e,t,a,n;if(!b.current)return;if(null==C?void 0:C.current){null==C||null===(n=C.current)||void 0===n||n.scrollIntoView({behavior:"smooth"});return}S.messages?null===(t=Z())||void 0===t||t.scrollIntoView({behavior:"smooth"}):null===(e=b.current)||void 0===e||e.scrollTo(0,0);let r=null===(a=b.current)||void 0===a?void 0:a.scrollHeight;window.scrollTo(0,r)};(0,r.useEffect)(()=>{b.current&&A()},[b,C]);let I=e=>{navigator.clipboard.writeText((null==e?void 0:e.imageSrc)||(null==e?void 0:e.text))},D=e=>{let t=document.createElement("a");t.download="ai-family-image.png",t.href=null==e?void 0:e.imageSrc,t.click()},M=e=>{var t;S.messages.splice(e,1),S.setMessages(S.messages),j.client.put(null===j.paths||void 0===j.paths?void 0:j.paths.updateDb,{table:"chats",session_id:null==S?void 0:null===(t=S.activeChat)||void 0===t?void 0:t.session_id,messages:null==S?void 0:S.messages})},T=e=>(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(i.Z,{textAlign:"right",children:[(0,n.jsx)(l.Z,{variant:"subtitle2",children:e.data.message.date}),(0,n.jsx)(l.Z,{variant:"subtitle2",children:e.data.message.time})]}),(0,n.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"end"},children:[(0,n.jsx)(c.Z,{title:"Copy",children:(0,n.jsx)(d.Z,{size:"small",onClick:()=>I(e.data.message),children:(0,n.jsx)(x.Z,{})})}),e.download&&(0,n.jsx)(c.Z,{title:"Download",children:(0,n.jsx)(d.Z,{size:"small",onClick:()=>D(e.data.message),children:(0,n.jsx)(v.Z,{})})}),(0,n.jsx)(c.Z,{title:"Delete Message",children:(0,n.jsx)(d.Z,{size:"small",onClick:()=>M(e.data.index),children:(0,n.jsx)(f.Z,{})})})]})]});return(0,n.jsx)(u.ZP,{container:!0,justifyContent:"center",mt:8,children:(0,n.jsx)(u.ZP,{item:!0,xs:12,component:m.E.div,ref:b,style:{overflowY:"auto"},sx:{minHeight:window.innerHeight-260,width:window.innerWidth},children:a?(0,n.jsx)(h.Z,{}):(null==S?void 0:null===(t=S.messages)||void 0===t?void 0:t.length)?(0,n.jsx)(n.Fragment,{children:S.messages.map((e,t)=>(0,n.jsxs)(m.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.35},exit:{opacity:0},style:{marginBottom:"1rem",textAlign:"bot"===e.sender?"left":"right",background:"rgba(255, 255, 255, 0.4)",borderRadius:"8px",backdropFilter:"blur(16px)",padding:"8px"},children:[console.log("message: ",e),(0,n.jsx)(g.Z,{primary:"bot"===e.sender?"AI":"You",secondary:null==e?void 0:e.model}),(null==e?void 0:e.imageSrc)?(0,n.jsxs)(n.Fragment,{children:[(null==e?void 0:e.imageSrc)&&"string"==typeof e.imageSrc?(0,n.jsx)(p.LazyLoadImage,{effect:"opacity",src:e.imageSrc,alt:"Captured image",width:"100%",style:{maxWidth:"100%",borderRadius:"8px"}},t):Array.isArray(e.imageSrc)?e.imageSrc.map(e=>(0,n.jsx)(p.LazyLoadImage,{effect:"opacity",src:e,alt:"Captured image",width:"400px",style:{maxWidth:"100%",borderRadius:"12px",padding:"0 8px"}})):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(w.default,{isLastElement:S.messages.length-1===t,children:(null==e?void 0:e.text)||""}),(0,n.jsx)(T,{data:{message:e,index:t},download:!0})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.default,{isLastElement:S.messages.length-1===t,children:(null==e?void 0:e.text)||""}),(0,n.jsx)(T,{data:{message:e,index:t}})]})]},t))}):(0,n.jsx)(l.Z,{variant:"h6",align:"center",children:"No messages yet"})})})}},56152:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(85893),r=a(61973),s=a(37882),i=a(99802),l=a(63532),o=a(53567),c=a(72679);let d=e=>{let{children:t,isLastElement:a=!1}=e;return console.log("MarkdownWrapper: ",a),(0,n.jsx)(r.U,{children:t,remarkPlugins:[o.Z],rehypePlugins:[l.Z],components:{code(e){let{children:t,className:a,node:r,...l}=e,o=/language-(\w+)/.exec(a||"");return o?(0,n.jsx)(s.Z,{...l,PreTag:"div",children:String(t).replace(/\n$/,""),language:o[1],style:i.Z}):(0,n.jsx)("code",{...l,className:a,children:t})},img:e=>(0,n.jsx)(c.LazyLoadImage,{...e,effect:"blur"})}})}},70621:function(e,t,a){a.r(t),a.d(t,{client:function(){return s},paths:function(){return r},queries:function(){return l}});var n=a(80430);let r={example:"/example",notionTest:"/notion/Home",schema:"/database/api/read_schema",database:"/database/",chat:"/chat/generate",generateImage:"/stability/generate",ocr:"/camera/analyze-image",portfolio:"/notion/portfolio",notion:"/notion",graphql:"http://localhost:4000",host:"http://localhost:5052"},s=n.Z.create({baseURL:r.host+"/api/v1",headers:{}}),i=n.Z.create({baseURL:r.graphql,headers:{}}),l={query:(e,t,a)=>({queryKey:[e],queryFn:async()=>t?(await s[a||"post"](e,t)).data:(await s[a||"get"](e)).data}),graphQuery:(e,t,a)=>({queryKey:["graphql",e],queryFn:async()=>t?(await i[a||"post"](e,t)).data:(await i[a||"get"](e)).data})}},22913:function(e,t,a){a.d(t,{q:function(){return n}});let n=(0,a(97220).create)(e=>({view:{title:"Home",id:"2a822d5e-ac09-4df3-9981-588809928086"},setView:t=>e(()=>({view:t}))}))},9063:function(e,t,a){a.d(t,{a:function(){return r}});var n=a(97220);let r=(0,n.create)(e=>({messages:[],view:"chat",chatMode:"/chat",chatModes:["/create","/chat","/imagine","/internet"],mode:"chat",imageSrc:null,imageClassification:null,drawerOpen:!1,activeChat:null,activeChatId:null,visionMode:"default",defaultModel:"llama3:latest",selectedOptionsTab:0,drawerView:"read",chatStatus:null,inputMessage:"",mutationOptions:{method:"post",endpoint:"create_row",table:"chats"},toolsWindowDrawer:!1,isInternetQuery:!1,appContent:null,appConfig:null,cpxData:null,attachment:null,setAppConfig:t=>e(()=>({appConfig:t})),setAppContent:t=>e(()=>({appContent:t})),setCpxData:t=>e(()=>({cpxData:t})),setIsInternetQuery:t=>e(()=>({isInternetQuery:t})),setToolsWindowDrawer:t=>e(()=>({toolsWindowDrawer:t})),setMutationOptions:t=>e(()=>({mutationOptions:t})),handleInput:t=>e(()=>({inputMessage:t})),addMessage:t=>e(e=>({messages:[...e.messages,t]})),setMessages:t=>e(()=>({messages:t})),handleView:t=>e(()=>({view:t})),handleMode:t=>e(()=>({mode:t})),handleImageSrc:t=>e(e=>e.imageSrc?{imageSrc:Array.isArray(e.imageSrc)?[...e.imageSrc,t]:[e.imageSrc,t]}:{imageSrc:t}),handleImageClassification:t=>e(()=>({imageClassification:t})),handleDrawer:t=>e(()=>({drawerOpen:t})),setDrawerView:t=>e(()=>({drawerView:t})),handleActiveChat:t=>e(()=>({activeChat:t})),handleActiveChatId:t=>e(()=>({activeChatId:t})),handleAttachment:t=>e(()=>({attachment:t})),toggleVisionMode:t=>e(()=>({visionMode:t})),setDefaultModel:t=>e(()=>({defaultModel:t,drawerOpen:!1,selectedOptionsTab:0})),handleSelectedOptionsTab:t=>e(()=>({selectedOptionsTab:t})),updateChatStatus:t=>e(()=>({chatStatus:t})),clearChat:()=>e(()=>({messages:[]})),clearInput:()=>e(()=>({inputMessage:""})),setState:t=>e(e=>({...e,...t}))}));(0,n.create)(e=>({session:null,setSession:t=>e({session:t})}))},70260:function(e,t,a){a.d(t,{O:function(){return n}});let n=(0,a(97220).create)(e=>({userID:null,isDrawerOpen:!1,activeDrawer:"weight",drawerAnchor:"right",selectedSearchItem:null,activeSearchTab:"recent",fitnessTables:{},registrationView:!1,setRegistrationView:t=>e(()=>({registrationView:t})),appConfig:null,setAppConfig:t=>e(()=>({appConfig:t})),setFitnessTables:t=>e(()=>({fitnessTables:t})),toggleDrawer:t=>e(e=>({isDrawerOpen:(null==t?void 0:t.open)!==void 0?t.open:!e.isDrawerOpen,drawerAnchor:(null==t?void 0:t.anchor)||e.drawerAnchor})),setActiveDrawer:t=>e(()=>({activeDrawer:t})),setSelectedSearchItem:t=>e(()=>({selectedSearchItem:t})),setActiveSearchTab:t=>e(()=>({activeSearchTab:t}))}))},67046:function(e,t,a){a.r(t),a.d(t,{useAppStore:function(){return i.q},useChatStore:function(){return l.a},useFitnessStore:function(){return r.O},useSupabaseStore:function(){return n.F},useUtilityStore:function(){return s.useUtilityStore}});var n=a(4821),r=a(70260),s=a(80476),i=a(22913),l=a(9063)},4821:function(e,t,a){a.d(t,{F:function(){return n}});let n=(0,a(97220).create)(e=>({session:null,userType:null,setSession:t=>e({session:t}),setUserType:t=>e({userType:t})}))},80476:function(e,t,a){a.r(t),a.d(t,{default:function(){return r},useUtilityStore:function(){return n}});let n=(0,a(97220).create)(e=>({alert:{severity:"success",message:"",open:!1},confirm:{open:!1,title:"",message:""},drawer:{open:!1,content:null,anchor:"left"},setDrawer:t=>e(e=>({drawer:{...e.drawer,...t}})),setConfirm:t=>e(e=>({confirm:{...e.confirm,...t}})),clearConfirm:()=>e(()=>({confirm:{open:!1,title:"",message:""}})),colorMode:"dark",setColorMode:t=>e(()=>({colorMode:t})),setAlert:t=>e(()=>({alert:t})),createAlert:(t,a)=>e(()=>({alert:{severity:t,message:a,open:!0}}))})),r=n}}]);